version: '3'
services:
  dbMailServer:
    image: "mcr.microsoft.com/mssql/server:2019-latest"
    environment:
      SA_PASSWORD: P@ssword42
      ACCEPT_EULA: "Y"
    ports:
      - 1433:1433
    # mem_limit: 1G
  queue:
    image: rabbitmq:3-management
    hostname: "rabbitmq"
    ports:
      - 15672:15672
      - 5672:5672
    # mem_limit: 250M
  api:
    image: sendmai.api
    build: backend/MailSender.Api
    environment:
      DbServer: "localhost"
      DbPort: "1433"
      DbUser: "SA"
      Password: "P@ssword42"
      Database: "MailSender"
    ports:
      - 8080:80
    depends_on:
      - dbMailServer
      - queue
  # worker:
  #   image: sendmail.worker.5
  #   build: worker/MailSender.Worker
  #   depends_on:
  #     - queue